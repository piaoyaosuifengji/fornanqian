;*******************************************************************************
; 版权:   杭州利尔达科技有限公司
; 文件名:MSP430F261x_P2.S43
; 版本：V1.0
; 工作环境:IAR Embedded Workbench Evaluation for MSP430 4.10A
; 作者:Huanglongsong 
; 描述：通过例程演示如何设置I/O端口，配置P5.7端口的相关寄存器，实现LED闪烁
; 生成日期:2008年11月
;  ACLK= n/a, MCLK= SMCLK= default DCO ~1.045MHz
;
;                MSP430F261x
;             -----------------
;         /|\|              XIN|-
;          | |                 |
;          --|RST          XOUT|-
;            |                 |
;            |             P5.7|-->LED
;
;
;******************************************************************************
#include "msp430x26x.h"
;-------------------------------------------------------------------------------
            RSEG    CSTACK                  ; 定义堆栈段
;-------------------------------------------------------------------------------
            RSEG    CODE                    ; 定义程序段
;-------------------------------------------------------------------------------
RESET       mov.w   #SFE(CSTACK),SP         ; 初始化堆栈指针
StopWDT     mov.w   #WDTPW+WDTHOLD,&WDTCTL  ; 停止开门狗
SetupP1     bis.b   #BIT7,&P5DIR            ; P5.7输出模式
                                            ;
Mainloop    xor.b   #BIT7,&P5OUT            ; P5.7输出高
Wait        mov.w   #050000,R15             ; 延时值赋给R15
L1          dec.w   R15                     ; R15减1
            jnz     L1                      ; 延时时间到了吗?
            jmp     Mainloop                ; 重复执行
                                            ;
;-------------------------------------------------------------------------------
            COMMON  INTVEC                  ; Interrupt Vectors
;-------------------------------------------------------------------------------
            ORG     RESET_VECTOR            ; 外部上电复位入口
            DW      RESET
            END
