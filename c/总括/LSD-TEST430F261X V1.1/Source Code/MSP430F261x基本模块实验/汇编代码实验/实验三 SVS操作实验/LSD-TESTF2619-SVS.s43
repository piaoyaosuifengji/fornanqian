/*******************************************************************************
// 版权:   杭州利尔达科技有限公司
// 文件名:MSP430x261x_SVS.c
// 版本：V1.0
// 工作环境:IAR Embedded Workbench Evaluation for MSP430 4.11B
// 作者:Huanglongsong
// 描述：SVS模块的特性演示，通过SVS监测VCC,当VCC高于2.5V时，MSP430内部触发P5.7
//      翻转闪烁，当VCC低于2.5V时，由SVS产生一个复位信号(POR)复位MSP430!
//  ACLK= n/a, MCLK= SMCLK= default DCO ~ 1.045MHz
// 生成日期:2008年12月
//
//                MSP430F261x
//             -----------------
//         /|\|              XIN|-
//          | |                 |
//          --|RST          XOUT|-
//            |                 |
//            |             P5.7|-->LED
//
//
******************************************************************************/
#include  <msp430x26x.h>
;-------------------------------------------------------------------------------
            RSEG    CSTACK                  ; 定义堆栈区
;-------------------------------------------------------------------------------
            RSEG    CODE                    ; 定义代码段
;-------------------------------------------------------------------------------
RESET       mov.w   #SFE(CSTACK),SP         ; 初始化堆栈
StopWDT     mov.w   #WDTPW+WDTHOLD,&WDTCTL  ; 关闭看门狗
SetupP5     bis.b   #BIT7,&P5DIR            ; P5.7  输出
            mov.b   #060h+PORON,&SVSCTL     ; SVS监控电压2.5V
                                            ;
Mainloop    mov.w   #050000,R15             ; 延时
L1          dec.w   R15                     ; 
            jnz     L1                      ; 
            xor.b   #080h,&P5OUT            ; 翻转P5.7
            jmp     Mainloop                ; 
                                            ;
;-------------------------------------------------------------------------------
; 中断向量区
;-------------------------------------------------------------------------------
            COMMON  INTVEC
            ORG     RESET_VECTOR            ; 复位向量
            DW      RESET
            END