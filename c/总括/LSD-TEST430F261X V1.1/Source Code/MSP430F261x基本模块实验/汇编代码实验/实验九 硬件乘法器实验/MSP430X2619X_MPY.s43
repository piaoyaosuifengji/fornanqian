/*******************************************************************************
; 版权:   杭州利尔达科技有限公司
; 文件名:MSP430F261x_MPY.c
; 版本：V1.0
; 工作环境:IAR Embedded Workbench Evaluation for MSP430 4.11B
; 作者:Huanglongsong 
; 描述：硬件乘法器的操作，实现8X8位的乘法运算，本例程实现乘法、乘加运算，在乘法
;       运算中，MPY放置被乘数，OP2放置乘数，当OP2放完数值后立马启动乘法运算，结
;       果存入RESLO和RELHI中;乘加运算亦同，只是运算结果与上次结果相加作为本次结果！
; 生成日期:2008年12月
; 说明：1、MPY硬件乘法器支持16*16、8*8、16*8、8*16的乘法运算
;       2、第一操作数OP1规定了运算法则如MPY，MPYS，MAC，MACS；第二操作数写入后，就可以
;          从高字寄存器（RESHI）、低字寄存器（RESEL）、以及扩展寄存器（SUMEXT）读出结果
;                MSP430F261x
;             -----------------
;         /|\|                 |
;          | |                 |
;          --|RST              |
;            |                 |
;            |                 |
;
;******************************************************************************/
#include  <msp430x26x.h>
;-------------------------------------------------------------------------------
            RSEG    CSTACK                  ; 定义堆栈段
;-------------------------------------------------------------------------------
            RSEG    CODE                    ; 定义程序段
;-----------------------------------------------------------------------------
RESET       mov.w   #SFE(CSTACK),SP         ; 初始化堆栈指针
StopWDT     mov.w   #WDTPW+WDTHOLD,&WDTCTL  ; 停止开门狗
            mov.w   #12h,MPY                ; 无符号乘法运算 
            mov.w   #56h,OP2                ; 
            nop
            mov.w   #12h,MAC                ; 乘加运算
            mov.w   #56h,OP2                ; 赋第二操作数
                                            ; 
            bis.w   #LPM4,SR                ; LPM4

;------------------------------------------------------------------------------
            COMMON  INTVEC                  ; 中断向量定义
;------------------------------------------------------------------------------
            ORG     RESET_VECTOR            ; 复位向量
            DW      RESET                   ;
            END